{
  "id": "docs_dev_scs_debugging_on-chain-mechanisms_md",
  "title": "On-Chain Debugging Mechanisms (Limited)",
  "summary": "The document discusses the limited on-chain debugging mechanisms available for ErgoScript, the scripting language used in the Ergo blockchain. It covers the experimental `debug()` function, which allows script writers to output information during script evaluation, and the analysis of transaction failure logs to identify the reasons for script execution failures. The document emphasizes that these on-chain mechanisms have limitations compared to traditional debugging approaches and should be used in conjunction with robust off-chain testing and simulation.",
  "qa_pairs": [
    {
      "question": "What is the purpose of the `debug()` function in ErgoScript?",
      "answer": "The `debug()` function is an experimental feature that allows script writers to output specific information during script evaluation."
    },
    {
      "question": "Where is the output from the `debug()` function typically displayed?",
      "answer": "The output from `debug()` is typically expected to appear in the logs of the validating node that processes the transaction containing the script."
    },
    {
      "question": "What are some common errors that may be reported in the node logs when a transaction fails validation?",
      "answer": "Common errors reported in the logs include 'Script evaluation failed', 'Assertion failed', 'Cost limit exceeded', and type mismatches or other interpreter errors."
    },
    {
      "question": "What are the limitations of the on-chain debugging mechanisms described in the document?",
      "answer": "The on-chain debugging mechanisms offer limited visibility compared to traditional debugging, and they usually don't pinpoint the exact line number within the ErgoScript source where the failure occurred."
    },
    {
      "question": "How should the on-chain debugging mechanisms be used in the context of ErgoScript development?",
      "answer": "The on-chain debugging mechanisms should be used in conjunction with robust off-chain testing and simulation, as they provide valuable clues when troubleshooting transaction failures."
    }
  ],
  "sections": [
    {
      "heading": "Introduction",
      "level": 0,
      "content": "---\ntags:\n  - Debugging\n  - ErgoScript\n  - On-Chain\n  - debug()\n  - Transaction Failure\n  - Node Logs\n---"
    },
    {
      "heading": "On-Chain Debugging Mechanisms (Limited)",
      "level": 1,
      "content": "Direct, interactive debugging of ErgoScript during its execution on the live blockchain is generally not possible due to the deterministic and constrained nature of the environment. However, there are limited mechanisms that can provide some insight, primarily focused on logging and analyzing failures."
    },
    {
      "heading": "`debug()` Function (Experimental)",
      "level": 2,
      "content": "*   **Concept:** An experimental `debug()` function may be available in recent versions of the ErgoTree interpreter. Its purpose is to allow script writers to output specific information during script evaluation.\n*   **Status & Availability:** This feature's availability and exact behavior depend on the interpreter version used by the nodes. **Always check the relevant `sigmastate-interpreter` release notes and Issue [#1035](https://github.com/ergoplatform/sigmastate-interpreter/issues/1035) for the current status.**\n*   **Output:** The output from `debug()` is typically expected to appear in the logs of the validating node that processes the transaction containing the script. This usually requires the node to be configured with a specific log level (e.g., `DEBUG`) to capture this information.\n*   **Usage:** *(Specific syntax and output format details should be added here once the feature is stable and officially documented).*\n*   **Caution:**\n    *   Using `debug()` adds computational cost to script execution.\n    *   Excessive use can significantly increase node log verbosity.\n    *   It is primarily intended for **development and testing phases**, not for widespread use in production contracts deployed on mainnet. Relying on it for core contract logic is discouraged."
    },
    {
      "heading": "Transaction Failure Analysis",
      "level": 2,
      "content": "When a transaction attempting to spend a contract-protected box fails validation by a node, the node often logs information about the reason for failure.\n\n*   **Finding Errors:** Check the logs of the node that rejected the transaction (either your own node or potentially an explorer's backend node if using their API for submission). Look for `ERROR` or `WARN` level messages related to transaction validation or script execution around the time the transaction was submitted.\n*   **Common Errors:** Logs might indicate:\n    *   `Script evaluation failed`: The script returned `false`.\n    *   `Assertion failed`: A specific `sigmaProp` condition evaluated to false.\n    *   `Cost limit exceeded`: The script execution was too complex.\n    *   Type mismatches or other interpreter errors.\n*   **Limitations:** While helpful, these logs often don't pinpoint the exact line number within the ErgoScript source. They indicate *that* the script failed, but debugging *why* usually requires correlating the error with off-chain testing and logic review.\n\nThese on-chain mechanisms offer limited visibility compared to traditional debugging but can provide valuable clues when troubleshooting transaction failures. They should be used in conjunction with robust [off-chain testing and simulation](debugging.md#core-principles-best-practices)."
    }
  ],
  "source": "https://github.com/ergoplatform/ergodocs",
  "file_path": "docs/dev/scs/debugging/on-chain-mechanisms.md",
  "processed_at": "2025-05-11T19:27:39.417267",
  "ai_processed": true
}