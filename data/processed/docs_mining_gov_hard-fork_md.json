{
  "id": "docs_mining_gov_hard-fork_md",
  "title": "Hard Forks in Ergo",
  "summary": "The document provides an overview of hard forks in the Ergo blockchain. It explains that hard forks involve significant changes to the consensus mechanism or core protocol rules, requiring all nodes to upgrade to the new software version. Hard forks are necessary for major upgrades, bug fixes, and governance decisions. The implementation process includes development and testing, coordination with the network, and activation with monitoring. Hard forks are used for protocol upgrades, security fixes, and consensus changes. Careful planning, coordination, and testing are essential to ensure a smooth transition and avoid disruptions to the network.",
  "qa_pairs": [
    {
      "question": "What is a hard fork in the context of the Ergo blockchain?",
      "answer": "A hard fork in the Ergo blockchain typically involves significant changes to the underlying consensus mechanism or core protocol rules, which require all nodes or participants in the network to upgrade to the new version of the software."
    },
    {
      "question": "Why are hard forks necessary in the Ergo blockchain?",
      "answer": "Hard forks are necessary for introducing major upgrades, addressing critical vulnerabilities, and implementing governance decisions that require a clean break from previous rules."
    },
    {
      "question": "How are hard forks implemented in the Ergo blockchain?",
      "answer": "The implementation of a hard fork in Ergo follows these general steps: 1) Development and testing, 2) Coordination with the network."
    },
    {
      "question": "What is the purpose of the `ForkResolutionSpec` file in the Ergo GitHub repository?",
      "answer": "The `ForkResolutionSpec` file contains integration tests designed to validate the behavior of the network during and after a fork, ensuring that the nodes correctly resolve different chain forks and eventually converge on a single valid chain."
    },
    {
      "question": "What role do the node configuration files, such as `nodes.conf`, play in setting up the environment for a hard fork in Ergo?",
      "answer": "The node configuration files, such as `nodes.conf`, play a significant role in setting up the environment for the fork, as they specify the settings for different nodes in the network."
    }
  ],
  "sections": [
    {
      "heading": "Introduction",
      "level": 0,
      "content": "---\ntags:\n  - Forking\n  - Fork\n---"
    },
    {
      "heading": "Hard Forks in Ergo",
      "level": 1,
      "content": ""
    },
    {
      "heading": "Overview",
      "level": 2,
      "content": "In the context of the Ergo blockchain, a hard fork typically involves significant changes to the underlying consensus mechanism or core protocol rules, which require all nodes or participants in the network to upgrade to the new version of the software. If a portion of the network's participants do not upgrade, the blockchain splits into two separate chains, with the new chain following the updated protocol and the old chain following the previous one."
    },
    {
      "heading": "Why Hard Forks Are Necessary",
      "level": 2,
      "content": "Hard forks are necessary for several reasons:\n\n- **Major Upgrades:** Introducing new features or changing core mechanics of the blockchain, such as changes in the consensus algorithm, transaction validation rules, or other fundamental properties that require all nodes to operate under the new rules.\n  \n- **Bug Fixes:** Addressing critical vulnerabilities that cannot be patched via soft forks or minor updates. These bugs could potentially threaten the security of the entire network.\n\n- **Governance Decisions:** Implementing decisions made by the community or core developers that require a clean break from previous rules, such as changes in monetary policy or governance structures."
    },
    {
      "heading": "How Hard Forks Are Implemented in Ergo",
      "level": 2,
      "content": "The implementation of a hard fork in Ergo follows these general steps:\n\n1. **Development and Testing:** \n    - New protocol rules are developed and rigorously tested in a controlled environment, typically a testnet or developer network. This is crucial to ensure that all changes work as intended and do not introduce new issues.\n    \n    - The [`ForkResolutionSpec`](https://github.com/ergoplatform/ergo/blob/master/src/it/scala/org/ergoplatform/it/ForkResolutionSpec.scala) file, found in the [Ergo GitHub repository](https://github.com/ergoplatform/ergo), is an example of how forks are tested. This file contains integration tests designed to validate the behavior of the network during and after the fork, ensuring that the nodes correctly resolve different chain forks and eventually converge on a single valid chain.\n\n   ```scala\n   it should \"Fork resolution after isolated mining\" in {\n       // Test scenario ensuring that nodes resolve forks correctly after isolated mining periods\n   }\n   ```\n\n2. **Coordination with the Network:**\n   - Developers coordinate with miners, node operators, and the broader community to schedule the fork. Communication is crucial, as all participants need to update their software to the new version by a certain block height or date.\n\n   - The node configuration files, such as `nodes.conf`, play a significant role in setting up the environment for the fork. This file specifies the settings for different nodes in the network and ensures that they are all synchronized and ready for the protocol change.\n\n   ```hocon\n   nodes = [\n       { scorex { network.nodeName = node01 } },\n       { scorex { network.nodeName = node02 } },\n       ...\n   ]\n   ```\n\n3. **Activation and Monitoring:**\n    - At the predetermined block height or time, the new protocol rules are activated. The network continues to operate, but now all participants are following the new set of rules.\n\n    - Post-fork, developers and node operators monitor the network for any anomalies or issues that may arise as a result of the fork.\n\n4. **Handling Divergence:**\n   - In the event that some nodes do not upgrade, the blockchain may split into two, creating a new chain (following the new rules) and a legacy chain (following the old rules). The `ErgoValidationSettings` class in the Ergo core provides mechanisms to enforce these new rules, ensuring that nodes adhering to the new rules can correctly validate blocks and transactions.\n\n   ```scala\n   case class ErgoValidationSettings(\n       rules: Map[Short, RuleStatus],\n       sigmaSettings: SigmaValidationSettings,\n       updateFromInitial: ErgoValidationSettingsUpdate\n   ) extends ValidationSettings with BytesSerializable {\n       // Validation logic for new rules\n   }\n   ```"
    },
    {
      "heading": "When to Use Hard Forks",
      "level": 3,
      "content": "- **Protocol Upgrades:** When a major new feature or change needs to be implemented that is not backward-compatible.\n  \n- **Security Fixes:** When critical vulnerabilities are discovered that cannot be addressed through a soft fork.\n\n- **Consensus Changes:** When the community decides to make fundamental changes to the consensus algorithm or governance model."
    },
    {
      "heading": "Conclusion",
      "level": 2,
      "content": "Hard forks are a powerful tool in the evolution of the Ergo blockchain, allowing for significant changes and improvements. However, they require careful planning, coordination, and communication to ensure the network remains secure and functional during and after the transition. As with any major change, thorough testing and validation are essential to avoid disruptions.\n\nFor further details on how these processes are implemented and tested within the Ergo blockchain, you can explore the relevant code and configuration files available in the [Ergo GitHub repository](https://github.com/ergoplatform/ergo)."
    }
  ],
  "source": "https://github.com/ergoplatform/ergodocs",
  "file_path": "docs/mining/gov/hard-fork.md",
  "processed_at": "2025-05-11T19:50:53.213214",
  "ai_processed": true
}