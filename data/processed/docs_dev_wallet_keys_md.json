{
  "id": "docs_dev_wallet_keys_md",
  "title": "Hierarchical keys",
  "summary": "The document discusses hierarchical keys and the BIP-44 and EIP-3 standards for deterministic wallets. It explains the path structure defined in BIP-44 and how the Ergo ecosystem uses the coin type 429. The document also discusses the change address handling in EIP-3, where only external addresses are used, and how the Ergo node derives the change address. Finally, it provides instructions on how to derive an address using the Ergo node's API.",
  "qa_pairs": [
    {
      "question": "What is the standard defined in BIP-0044 for deterministic wallets?",
      "answer": "BIP-0044 defines a logical hierarchy for deterministic wallets with a path of m / 44' / coin_type' / account' / change / address_index."
    },
    {
      "question": "What is the coin type for the Ergo ecosystem according to EIP-0003?",
      "answer": "The coin type for the Ergo ecosystem is 429, derived from the numerical values of the ASCII characters for the word 'ergo'."
    },
    {
      "question": "How does the 'change' level differ between BIP-0044 and EIP-0003?",
      "answer": "In BIP-0044, the constant 0 is used for external addresses and constant 1 for internal/change addresses. EIP-0003 does not use constant 1 at all, and all wallets should have any change within a transaction go back to the address using constant 0."
    },
    {
      "question": "How can you derive an address using the Ergo node's wallet API?",
      "answer": "Navigate to localhost:9053/swagger#/wallet/walletDeriveKey, click 'Try it out', enter the derivation path 'm/44'/429'/0'/0/0', and click execute to get the derived address."
    },
    {
      "question": "What is the default first key pair for an Ergo wallet according to the EIP-0003 standard?",
      "answer": "The default first key pair for an Ergo wallet is m / 44' / 429' / 0' / 0 / 0."
    }
  ],
  "sections": [
    {
      "heading": "Hierarchical keys",
      "level": 1,
      "content": "[BIP-0044](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki) defines a logical hierarchy for deterministic wallets. This is a common standard that is used directly (or used as inspiration) by countless projects in the cryptocurrency sphere.\n\nSuch a standard allows end users to move between different wallet software trivially and established the framework for a more cohesive ecosystem to grow.\n\nThe standard has five levels as part of its path:\n\n```bash\nm / 44' / coin_type' / account' / change / address_index\n```\n\n[EIP-0003: Deterministic Wallet Standard](https://github.com/ergoplatform/eips/blob/ad0730daaebd9783f8db3c3095187a62851ee132/eip-0003.md) attempts to define a specific `coin_type` for the Ergo ecosystem, as well as a policy for how wallets use the `change` level."
    },
    {
      "heading": "Coin Type",
      "level": 2,
      "content": "Registered **coin_type**s can be found in [SLIP-0044](https://github.com/satoshilabs/slips/blob/master/slip-0044.md)\n\nWe will be using the word **ergo** summed based on the numerical values of the ASCII characters for the **coin_type**. As shown below, this means that our **coin_type** is `429`.\n\n``\n101 + 114 + 103 + 111 = 429\n``\n\nThus our path will look as such:\n\n```bash\nm / 44' / 429' / account' / change / address_index\n```\n\nAnd the first default key pair for an Ergo wallet will be:\n\n```bash\nm / 44' / 429' / 0' / 0 / 0\n```"
    },
    {
      "heading": "Change",
      "level": 2,
      "content": "In BIP-44 the constant 0 is used for the external addresses and constant 1 for internal addresses (aka change addresses).\n\nFor EIP-3, we instead do not use constant 1 at all. Thus we do not support internal/change addresses, but only external addresses.\n\nAs such all wallets supporting EIP-3 should have any change within a transaction go back to the address using constant 0.\n\nThis decision was made to simplify the experience for end-users and solidify a cohesive standard for wallets to target in the Ergo ecosystem. A full-blown privacy-preserving mixer is already available within the ecosystem, ErgoMix, and thus the pseudo-anonymity provided by internal addresses is not particularly vital.\n\nThat said, in the future new wallets are more than welcome to create a new EIP for wallets that may wish to support internal addresses as well as an alternate standard (if valuable use cases arise)."
    },
    {
      "heading": "Derived Addresses",
      "level": 2,
      "content": "Ergo node uses a secret root key (derived from seed) for the *change* address. After switching to EIP-3, supported by CoinBarn and Yoroi around that time, the node switched to the same change address as in the wallets, thus deriving an address corresponding to `m/44\u2019/429\u2019/0\u2019/0/0`. (originally `m/1/2`)\n\n[Read More](https://www.ergoforum.org/t/an-issue-with-change-address-of-node-wallet/2940)"
    },
    {
      "heading": "Deriving Addresses",
      "level": 2,
      "content": "Navigate to `localhost:9053/swagger#/wallet/walletDeriveKey` \n\nClick ***\"Try it out\"***\n\n```bash\n\"derivationPath\": \"m/44'/429'/0'/0/0\" \n```\n\n- The wallet needs to be unlocked, and you need to authorize on top right on swagger\n- Click execute and check the address you get in the response"
    }
  ],
  "source": "https://github.com/ergoplatform/ergodocs",
  "file_path": "docs/dev/wallet/keys.md",
  "processed_at": "2025-05-11T19:39:46.992267",
  "ai_processed": true
}