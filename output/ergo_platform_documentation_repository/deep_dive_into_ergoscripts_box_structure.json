{
  "title": "Deep Dive into ErgoScript's Box Structure",
  "source_url": "docs/dev/scs/ergoscript/box-structure.md",
  "summary": "---\ntags:\n  - Box\n---\n\n# Deep Dive into ErgoScript's Box Structure\n\nIn Ergo's ecosystem, the term ['box'](box.md) is more than just an unspent transaction output balance. It's a versatile container that holds various types of information (value, tokens, custom data, etc.), making Ergo's boxes highly flexible and functional. This functionality allows for complex operations, such as executing scripts or smart contracts, directly on the blockchain. The `INPUTS` and `OUTPUTS` in ErgoScript are arrays, each consisting of `Box` type objects. A `Box` encapsulates the following key fields:\n\n1.",
  "keywords": [
    "deep",
    "dive",
    "ergoscript",
    "structure",
    "ergo",
    "ecosystem",
    "term",
    "transaction",
    "output",
    "balance",
    "container",
    "type",
    "information",
    "value",
    "tokens",
    "custom",
    "datum",
    "functionality",
    "operation",
    "script",
    "contract",
    "blockchain",
    "outputs",
    "array",
    "object",
    "field",
    "amount",
    "propositionbytes",
    "byte",
    "token",
    "asset",
    "registers](registers.md",
    "element",
    "pair",
    "tokenid",
    "out.tokens(0",
    "frombase64(\"nzdrgubmafio6lmsrjq2zeukgcoeyoyzaeiqbfys8sg=",
    "token._2",
    "match",
    "base64",
    "string"
  ],
  "sections": [
    {
      "heading": "Deep Dive into ErgoScript's Box Structure",
      "content": "In Ergo's ecosystem, the term 'box' is more than just an unspent transaction output balance. It's a versatile container that holds various types of information (value, tokens, custom data, etc.), making Ergo's boxes highly flexible and functional. This functionality allows for complex operations, such as executing scripts or smart contracts, directly on the blockchain.\nThe INPUTS and OUTPUTS in ErgoScript are arrays, each consisting of Box type objects. A Box encapsulates the following key fields:\nvalue: The amount held in the box, denoted in nanoErgs.\npropositionBytes: The script, serialized into a byte array.\ntokens: An optional field that holds an array of tokens or assets.\nR4..R9: These are the registers of a box, capable of storing any type of data.\nEach element in the tokens array is a pair, structured as (tokenId, amount). Here, tokenId is a 32-byte array, and amount is a Long value.\nscala\n{\n   val out = OUTPUTS(0)\n   val token = out.tokens(0)\n   token._1 == fromBase64(\"nZdrGUBMAfIO6lmSRJq2zEUKGCOeYOYzAeIqbfYs8sg=\")  &&\n   token._2 == 1 \n}\nIn this script, out is the first output box, and token is the first token in this box. The script checks if the tokenId of this token matches the given base64-encoded string and if the amount of the token is 1."
    }
  ],
  "qa_pairs": []
}