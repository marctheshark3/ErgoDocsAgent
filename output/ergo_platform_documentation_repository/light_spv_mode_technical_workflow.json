{
  "title": "Light SPV Mode Technical Workflow",
  "source_url": "docs/node/modes/light-spv-mode-workflow.md",
  "summary": "# Light SPV Mode Technical Workflow The technical workflow for the light-SPV mode in Ergo is as follows:\n\n### Bootstrap\n\n1. Send **`GetPoPoWProof`** for all connections. 2.  On receiving **`PoPoWProof`**, apply it to History (History should determine whether this PoPoWProof is better than its current best header chain). 3.",
  "keywords": [
    "light",
    "mode",
    "technical",
    "workflow",
    "ergo",
    "bootstrap",
    "getpopowproof",
    "connection",
    "popowproof",
    "history",
    "header",
    "chain",
    "goto",
    "regime",
    "message",
    "peer",
    "response",
    "block",
    "request",
    "java",
    "state",
    "roothash",
    "if(!isinitialbootstrapping",
    "broadcast",
    "blacklist"
  ],
  "sections": [
    {
      "heading": "Light SPV Mode Technical Workflow",
      "content": "The technical workflow for the light-SPV mode in Ergo is as follows:"
    },
    {
      "heading": "Bootstrap",
      "content": "Send GetPoPoWProof for all connections.\nOn receiving PoPoWProof, apply it to History (History should determine whether this PoPoWProof is better than its current best header chain).\nGOTO regular regime."
    },
    {
      "heading": "Regular",
      "content": "Send ErgoSyncInfo message to connected peers\nGet a response with an INV message containing the ids of blocks, better than\n    our best block.\nRequest headers for all ids from 2.\nOn receiving Header:\njava\n    if(History.apply(header).isSuccess) {\n        State.apply(header) // just change state roothash\n    if(!isInitialBootstrapping) Broadcast INV for this header\n    } else {\n        blacklist peer\n    }"
    }
  ],
  "qa_pairs": []
}