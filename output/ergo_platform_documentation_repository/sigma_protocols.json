{
  "title": "Sigma Protocols",
  "source_url": "docs/dev/scs/sigma.md",
  "summary": "---\ntags:\n  - Sigma Protocols\n  - Cryptography\n  - Zero-Knowledge Proofs\n---\n\n# Sigma Protocols\n\n*(Back to: [ErgoScript Overview](ergoscript.md)) *\n\n## Introduction\n\n**Sigma protocols** (\u03a3-protocols) are a class of cryptographic proof systems that play a central role in the Ergo blockchain. These protocols allow a **prover** to convince a **verifier** that they know a value, such as a secret key, without revealing the value itself (a property related to [zero-knowledge proofs](zkp.md)). \u03a3-protocols are the foundation for many [privacy](zkp.md)-preserving and [multi-signature](threshold.md) functionalities in Ergo. In **[ErgoScript](ergoscript.md)**, proving and verifying cryptographic statements are first-class primitives, giving developers access to powerful \u03a3-protocols.",
  "keywords": [
    "sigma",
    "protocols",
    "cryptography",
    "zero",
    "knowledge",
    "proofs",
    "ergoscript",
    "overview](ergoscript.md",
    "introduction",
    "protocol",
    "class",
    "proof",
    "system",
    "role",
    "ergo",
    "blockchain",
    "prover",
    "verifier",
    "value",
    "property",
    "proofs](zkp.md",
    "foundation",
    "functionality",
    "ergoscript](ergoscript.md",
    "statement",
    "primitive",
    "developer",
    "access",
    "script",
    "transaction",
    "outputs](transactions.md",
    "output",
    "conceptually",
    "generalization",
    "signatures](signing.md",
    "schnorr",
    "signature",
    "scheme](schnorr.md",
    "example",
    "recipient",
    "logarithm](dlog.md",
    "concept",
    "creation",
    "ring",
    "signatures](ring.md",
    "threshold",
    "signatures](threshold.md",
    "elementary",
    "group",
    "order",
    "curve",
    "discrete",
    "logarithm",
    "signature](schnorr.md",
    "respect",
    "generator",
    "scheme",
    "equality",
    "logarithms",
    "diffie",
    "hellman",
    "tuple](diffie.md",
    "connective",
    "composability",
    "contracts](ergoscript.md",
    "paper",
    "protocols](http://www.cs.au.dk/~ivan",
    "sigma.pdf",
    "feature",
    "combination",
    "logic",
    "secret",
    "number",
    "construction",
    "privacy",
    "construct",
    "agreement",
    "subset",
    "participant",
    "transaction](transactions.md",
    "involvement",
    "of-5",
    "contract",
    "thresholdscript",
    "atleast",
    "collection",
    "coll",
    "pk(\"9f8zqt1sue6w5acdmsprzshj3jjizkbyy3cetb4bisxeyk4rsnk",
    "pk(\"9hfwpyhcjcw4kqycgu4yagfc1ierakyfg24fkjljk2udga873uq",
    "pk(\"9fdvp2jca1e5nctt6q9ijzlssgj6v4juy8geaxuhp7ytusslsps",
    "pk(\"9gakeru1w4dh6adwxnnymfqjctnxnsmtym2lppmperckuscd6f3",
    "pk(\"9gmnsqrqdspplubqg2uzremmivgqh1r3jmnclac53hk3ycvagwe",
    "case",
    "multi",
    "wallets",
    "wallets](multisig.md",
    "party",
    "condition",
    "signatures",
    "privacy](zkp.md",
    "user",
    "behalf",
    "member",
    "mixer",
    "ergomixer](ergomixer.md",
    "application",
    "anonymity",
    "donation",
    "payment",
    "control",
    "wallet](wallets.md",
    "fund",
    "time",
    "locked",
    "conditions",
    "instance",
    "height](block",
    "block",
    "height",
    "mixers",
    "token",
    "mixer](mixer.md",
    "process",
    "sigmajoin](sigmajoin.md",
    "chain](off",
    "chain.md",
    "implementation",
    "ergomixer",
    "idea",
    "trustless",
    "mechanism",
    "workflow",
    "processing",
    "actor",
    "ergotree**](ergotree.md",
    "level",
    "spending",
    "sigmaboolean",
    "proposition",
    "fiat",
    "shamir",
    "scorexfoundation",
    "sigmastate",
    "interpreter",
    "blob",
    "develop",
    "docs",
    "dsl.md",
    "ergotree",
    "transformation",
    "technique",
    "environment",
    "interaction",
    "challenge",
    "hash",
    "commitment",
    "message",
    "chain",
    "applications",
    "resource",
    "state",
    "contracts",
    "custom",
    "wallet",
    "darkfund0",
    "development",
    "finance",
    "defi",
    "tutorial",
    "verifying",
    "ergoscript](https://www.ergoforum.org",
    "ergoscript/3407",
    "updateable",
    "multisig",
    "pattern](https://www.ergoforum.org",
    "pattern/3356",
    "presentation",
    "protocols](https://crypto.sjtu.edu.cn/~yandi/2018%20biu%20winter%20school",
    "techniques%20for%20efficient%20zk%20(cont.)/ws-19",
    "winter",
    "school-2019",
    "1.pdf",
    "protocols](https://cs.au.dk/~ivan",
    "conclusion",
    "backbone",
    "tool",
    "integration",
    "platform"
  ],
  "sections": [
    {
      "heading": "Sigma Protocols",
      "content": "(Back to: ErgoScript Overview)"
    },
    {
      "heading": "Introduction",
      "content": "Sigma protocols (\u03a3-protocols) are a class of cryptographic proof systems that play a central role in the Ergo blockchain. These protocols allow a prover to convince a verifier that they know a value, such as a secret key, without revealing the value itself (a property related to zero-knowledge proofs). \u03a3-protocols are the foundation for many privacy-preserving and multi-signature functionalities in Ergo.\nIn ErgoScript, proving and verifying cryptographic statements are first-class primitives, giving developers access to powerful \u03a3-protocols. Scripts protecting transaction outputs can contain \u03a3-statements, which must be proven (by generating \u03a3-proofs) before the outputs can be spent.\nConceptually, \u03a3-proofs are generalizations of digital signatures. The Schnorr signature scheme is the canonical example of a \u03a3-proof: it allows the recipient to prove knowledge of a secret (discrete logarithm) without revealing it. \u03a3-proofs in Ergo extend this concept, allowing the creation of more complex cryptographic protocols like multi-signature, ring signatures, and threshold signatures."
    },
    {
      "heading": "Elementary \u03a3-Protocols in ErgoScript",
      "content": "ErgoScript offers two elementary \u03a3-protocols over a group of prime order, such as an elliptic curve group:\nProof of Knowledge of Discrete Logarithm (Schnorr Signature): This protocol proves knowledge of the discrete logarithm of a given public key with respect to a fixed generator. Essentially, this is the Schnorr signature scheme.\nProof of Equality of Discrete Logarithms (Diffie-Hellman Tuple): This protocol proves that two values share the same discrete logarithm across two different generators.\nThese basic protocols can be composed to create more advanced proofs using logical connectives like AND, OR, and THRESHOLD. This composability is what enables the creation of sophisticated smart contracts and multi-signature schemes.\nFor a detailed introduction to \u03a3-protocols, refer to the paper On \u03a3-protocols."
    },
    {
      "heading": "Composability of \u03a3-Protocols",
      "content": "A powerful feature of \u03a3-protocols in Ergo is their composability. You can create logical combinations of cryptographic statements using basic AND/OR logic.\nExamples include:\nRing Signatures: A ring signature is a proof of knowledge of one of multiple secrets. For example:\n\nProve knowledge of either secret A or secret B.\n\n\n\nThreshold Signatures: A threshold signature is a proof that a certain number of secrets are known. For example:\n\nProve knowledge of at least two of three secrets.\nThese constructions allow for flexible and privacy-preserving proofs. The THRESHOLD construct (also known as k-out-of-n) is particularly useful for multi-party agreements, ensuring that a subset of participants can authorize a transaction without requiring everyone\u2019s involvement."
    },
    {
      "heading": "Example: 3-out-of-5 Threshold Signature",
      "content": "scala\n// Example ErgoScript for a 3-out-of-5 multi-signature contract\nval thresholdScript = s\"\"\"\n{\n  atLeast( // Requires at least 3 proofs from the collection below\n    3,\n    Coll(\n      PK(\"9f8ZQt1Sue6W5ACdMSPRzsHj3jjiZkbYy3CEtB4BisxEyk4RsNk\"), // Public Key 1\n      PK(\"9hFWPyhCJcw4KQyCGu4yAGfC1ieRAKyFg24FKjLJK2uDgA873uq\"), // Public Key 2\n      PK(\"9fdVP2jca1e5nCTT6q9ijZLssGj6v4juY8gEAxUhp7YTuSsLspS\"), // Public Key 3\n      PK(\"9gAKeRu1W4Dh6adWXnnYmfqjCTnxnSMtym2LPPMPErCkusCd6F3\"), // Public Key 4\n      PK(\"9gmNsqrqdSppLUBqg2UzREmmivgqh1r3jmNcLAc53hk3YCvAGWE\")  // Public Key 5\n    )\n  )\n}\n\"\"\"\nThis contract is an example of a 3-out-of-5 threshold signature scheme. It can be compiled to a Pay-to-Script (P2S) address, where any three of the five public keys can authorize a transaction."
    },
    {
      "heading": "1. Multi-Signature Wallets",
      "content": "Multi-signature wallets are a natural use case for \u03a3-protocols, where multiple parties are required to authorize a transaction. \u03a3-protocols allow you to set up flexible conditions such as requiring two out of three signatures, or even more complex schemes involving multiple participants."
    },
    {
      "heading": "2. Ring Signatures for Privacy",
      "content": "Ring signatures provide privacy by allowing a user to sign a transaction on behalf of a group without revealing which group member signed it. This is particularly useful for creating anonymous transactions and decentralized mixers, such as ErgoMixer. The privacy of ring signatures makes them ideal for applications where anonymity is crucial, such as anonymous donations or private payments."
    },
    {
      "heading": "3. Threshold Signatures",
      "content": "Threshold signatures are critical for decentralized control. For example, a corporate wallet could be protected by a 3-out-of-5 signature scheme, ensuring that no single party can unilaterally control the funds."
    },
    {
      "heading": "4. Time-Locked Conditions",
      "content": "\u03a3-protocols can be combined with time-locked conditions. For instance, you can construct a contract that allows a transaction to be spent if either a ring signature is provided by a set of participants before a certain block height, or the funds can be refunded by a single party after the block height has passed."
    },
    {
      "heading": "5. Decentralized Mixers",
      "content": "ErgoMixer is an advanced, non-custodial token mixer based on \u03a3-protocols. It leverages ring signatures and zero-knowledge proofs to provide enhanced privacy while ensuring that no third party is needed to manage or approve the mixing process. SigmaJoin, an off-chain implementation concept related to ErgoMixer, further extends the idea of trustless and decentralized privacy mechanisms."
    },
    {
      "heading": "Prover and Verifier Workflow",
      "content": "In Ergo, transaction processing using \u03a3-protocols involves two main actors: the Prover and the Verifier.\nProver:\n\nThe Prover uses the ErgoTree interpreter to reduce a high-level spending condition into a SigmaBoolean (the cryptographic proposition that needs to be proven). The SigmaBoolean is then converted into a cryptographic proof using the Fiat-Shamir transformation, ensuring that the transaction can only be authorized by parties who possess the necessary secrets (such as private keys).\n\n\n\nVerifier:\n\nThe Verifier also uses the ErgoTree interpreter to reduce the spending condition into a SigmaBoolean. It then checks the cryptographic proof against this proposition, ensuring that the transaction is valid and all required conditions are met."
    },
    {
      "heading": "Fiat-Shamir Transformation",
      "content": "The Fiat-Shamir transformation is a cryptographic technique that makes interactive proof systems non-interactive, suitable for use in blockchain environments. This is crucial for Sigma protocols, as it allows \u03a3-proofs to be created and verified without requiring real-time interaction between the prover and the verifier.\nIn Ergo, \u03a3-protocols rely on the Fiat-Shamir transformation to generate challenges (hash values) from the commitments and messages involved in the proof. This ensures that the proofs are non-interactive and can be verified deterministically on-chain."
    },
    {
      "heading": "Applications",
      "content": "ErgoMixer: A state-of-the-art, non-custodial token mixer using \u03a3-protocols for privacy and anonymity.\nSigmaJoin: An off-chain implementation concept related to ErgoMixer for decentralized privacy-preserving transactions.\nErgo Threshold Signature Contracts: Use \u03a3-protocols to create custom multi-signature wallets and contracts."
    },
    {
      "heading": "DarkFund0",
      "content": "DarkFund0: A ZK fund for privacy applications, sponsoring developments in privacy-focused decentralized finance (DeFi) on Ergo."
    },
    {
      "heading": "Tutorials",
      "content": "Verifying Schnorr Signatures in ErgoScript\nUpdateable Multisig Pattern"
    },
    {
      "heading": "Presentations",
      "content": "Sigma Protocols\nOn \u03a3-protocols"
    },
    {
      "heading": "Conclusion",
      "content": "Sigma protocols form the backbone of Ergo\u2019s smart contracts and cryptographic proofs, enabling flexible and privacy-preserving transactions. Whether it's for simple multi-signature wallets, complex threshold signatures, or advanced privacy-preserving ring signatures, \u03a3-protocols provide the necessary cryptographic tools for building secure and decentralized applications on the Ergo blockchain.\nWith their composability and integration into ErgoScript, \u03a3-protocols make Ergo a versatile platform for privacy-focused cryptographic applications."
    }
  ],
  "qa_pairs": []
}