{
  "title": "Merged Mining on Ergo",
  "source_url": "docs/archive/mining/merged.md",
  "summary": "---\ntags:\n  - Merged Mining\n  - Mining\n  - Sigma Chains\n---\n# Merged Mining on Ergo\n\n## Overview\n\nMerged mining allows miners to mine on multiple blockchains simultaneously using the same hashing power. In the context of Ergo, merged mining is proposed as a key consensus mechanism, particularly for **pegged sidechains** within the planned ** [Sigma Chains](sigma-chains.md)** framework. It is designed to enable these sidechains to leverage the security of the main Ergo blockchain without requiring dedicated mining hardware, playing a potential role in revitalizing Proof-of-Work (PoW) and enhancing cross-chain interoperability once implemented. A key advantage of Ergo's approach is its flexibility compared to implementations like Bitcoin's.",
  "keywords": [
    "merged",
    "mining",
    "sigma",
    "chains",
    "ergo",
    "overview",
    "miner",
    "blockchain",
    "hashing",
    "power",
    "context",
    "consensus",
    "mechanism",
    "sidechain",
    "chains](sigma",
    "framework",
    "security",
    "hardware",
    "role",
    "proof",
    "work",
    "interoperability",
    "advantage",
    "approach",
    "flexibility",
    "implementation",
    "bitcoin",
    "contract",
    "ergoscript",
    "utxo",
    "model",
    "coinbase",
    "transaction",
    "mined",
    "ecosystem",
    "mainchain",
    "structure",
    "unspent",
    "output",
    "mainnet",
    "progress",
    "data",
    "representation",
    "state",
    "datum",
    "tuple",
    "height",
    "change",
    "digest",
    "avl+",
    "tree",
    "history",
    "fields",
    "field",
    "nonce",
    "solution",
    "block",
    "reference",
    "ergohack",
    "report",
    "section",
    "submission",
    "fungible",
    "token",
    "record",
    "carrier",
    "difficulty",
    "logic",
    "rule",
    "validation",
    "variable",
    "minerpubkey",
    "emission",
    "verification",
    "enforce",
    "protocol",
    "attestation",
    "property",
    "pegging",
    "transition",
    "aspect",
    "algorithm",
    "agnostic",
    "option",
    "class",
    "asic",
    "chain",
    "economic",
    "sustainability",
    "update",
    "utility",
    "basis",
    "hash",
    "detail",
    "vision",
    "relation",
    "reward",
    "version",
    "control",
    "party",
    "incentive",
    "rewarding",
    "participant",
    "mint",
    "unlock",
    "pow.",
    "paper",
    "page",
    "example",
    "time",
    "concept",
    "relie",
    "majority",
    "assumption",
    "subset",
    "pool",
    "attack",
    "leverages",
    "integrated",
    "incentives",
    "revitalizes",
    "avenue",
    "enhanced",
    "core",
    "component",
    "trustless",
    "interaction",
    "construction",
    "report:](https://github.com",
    "ross",
    "blob",
    "whitepaper",
    "sidechain.pdf",
    "sections",
    "paper:](https://storage.googleapis.com",
    "medium",
    "docs",
    "ergoscript.pdf"
  ],
  "sections": [
    {
      "heading": "Overview",
      "content": "Merged mining allows miners to mine on multiple blockchains simultaneously using the same hashing power. In the context of Ergo, merged mining is proposed as a key consensus mechanism, particularly for pegged sidechains within the planned Sigma Chains framework. It is designed to enable these sidechains to leverage the security of the main Ergo blockchain without requiring dedicated mining hardware, playing a potential role in revitalizing Proof-of-Work (PoW) and enhancing cross-chain interoperability once implemented.\nA key advantage of Ergo's approach is its flexibility compared to implementations like Bitcoin's. Due to Ergo's expressive smart contracts (ErgoScript) and the extended UTXO model, merged mining doesn't need to be strictly tied to the coinbase transaction, allowing for sophisticated contract-based implementations."
    },
    {
      "heading": "Mechanism for Merged-Mined Sigma Chains",
      "content": "This mechanism describes the typical approach for merged-mined sidechains within the Sigma Chains ecosystem. Instead of modifying the mainchain's coinbase transaction structure, these sidechains use a dedicated UTXO (Unspent Transaction Output) on the Ergo mainnet to track the sidechain's progress and validate its Proof-of-Work (PoW).\nHere's how it typically works:\nSidechain Data Representation: The state and progress of the sidechain are represented as a data tuple, potentially including:\n\nh: Sidechain height.\nTh: State changes (transactions) at height h.\nUh: Digest of the sidechain's UTXO set AVL+ tree after processing Th.\nCh: Digest of the sidechain's state history AVL+ tree (committing to previous states).\nPoW Fields: For merged mining, crucial fields like nonce and solution demonstrating the PoW performed for the sidechain block at height h are added to this tuple.\n(Reference: ErgoHack Sidechain Report, Section 2)\n\n\n\nSubmission via Dedicated UTXO:\n\nA specific UTXO exists on the Ergo mainchain, uniquely identified by a special NFT (Non-Fungible Token). This UTXO acts as the official record carrier for the sidechain's merged mining data.\nAn Ergo miner who also mines the sidechain finds a valid PoW solution satisfying both the Ergo mainchain difficulty and the sidechain difficulty.\nThe miner then creates an Ergo transaction that spends the current sidechain data UTXO.\nThis transaction creates a new UTXO, protected by the same NFT, containing the updated sidechain data tuple (including the new height, state digests, and the valid PoW fields) for the latest sidechain block.\n\n\n\nContract Logic: The sidechain data UTXO is protected by an ErgoScript contract. This contract enforces the rules for updating the sidechain state:\n\nMiner Validation: The contract typically ensures that only a valid Ergo miner (potentially identified via context variables like minerPubKey, similar to the emission contract) can spend the box.\nPoW Verification: The contract enforces rules ensurin..."
    },
    {
      "heading": "Merged Mining in the Sigma Chains Ecosystem",
      "content": "Sigma Chains introduce an innovative approach to revitalizing PoW through merged mining. Key aspects include:\nAlgorithm Agnostic: Sigma Chains can support various PoW algorithms, making merged mining an attractive option for miners across different hardware classes (ASIC, GPU, CPU) who might find mining other chains unprofitable. This allows them to contribute to Ergo's ecosystem security.\nEconomic Sustainability: Merged mining on Sigma Chains allows Ergo miners to be paid in various sidechain tokens for securing those chains. However, ERG is still required for transaction fees when interacting with the Ergo mainnet (e.g., submitting the sidechain state UTXO update), creating a sustainable economic model that benefits miners and reinforces ERG's utility.\nInteroperability: This mechanism forms the basis for efficient and trustless cross-chain interoperability between Ergo and its sidechains. The pegging security is directly tied to the security of the sidechain itself, benefiting from the combined hash power directed towards it.\n(See Sigma Chains for more details on the broader vision)."
    },
    {
      "heading": "Relation to Emission Contract & Rewards",
      "content": "The contract governing the sidechain data UTXO can be viewed as a simplified version of Ergo's main emission contract, or potentially even be combined with it.\nMiner Control: Like the emission contract ensures only miners create emission boxes, the sidechain contract ensures miners (or authorized parties) update the sidechain state UTXO.\nIncentives: This mechanism allows for direct rewarding of merged-mining participants on the Ergo mainchain. The transaction spending the old sidechain UTXO and creating the new one could also be structured to:\nMint and distribute sidechain-specific tokens stored within the sidechain data UTXO itself.\nUnlock mainchain ERG or other tokens held in associated contract boxes as a reward for submitting the valid sidechain PoW.\n(Reference: ErgoScript Paper, Page 10 example of time-controlled emission, and the concept of miner-spendable contracts)."
    },
    {
      "heading": "Security",
      "content": "The security of a merged-mined sidechain relies on the \"honest majority assumption\" applied to the subset of Ergo miners participating in mining that specific sidechain. If a majority of the hash power directed towards the sidechain (from the pool of participating Ergo miners) is honest, the sidechain's history is considered secure against PoW-based attacks from those miners. The pegging security is equivalent to the security of the sidechain itself.\n(Reference: ErgoHack Sidechain Report, Section 2.1)"
    },
    {
      "heading": "Advantages on Ergo",
      "content": "Flexibility: Not restricted to coinbase transactions, allowing various contract-based implementations.\nLeverages ErgoScript: Enables sophisticated rules, validation, and incentive mechanisms within the sidechain data UTXO contract.\nUTXO-Based: Fits naturally within Ergo's extended UTXO model.\nIntegrated Incentives: Allows for seamless rewarding of miners (potentially in sidechain tokens or ERG) on the mainchain for securing the sidechain.\nRevitalizes PoW: Provides profitable avenues for miners using various hardware, strengthening the overall PoW ecosystem.\nEnhanced Interoperability: Forms a core component of the Sigma Chains framework for trustless cross-chain interactions."
    },
    {
      "heading": "References",
      "content": "Sigma Chains: Provides the broader context for merged mining and sidechain constructions on Ergo.\nErgoHack Sidechain Report:  (See Sections 2 and 2.1 for early technical details).\nErgoScript Paper: (See Page 10 for Emission Contract Example)."
    }
  ],
  "qa_pairs": []
}